apiVersion: integreatly.org/v1alpha1
kind: Grafana
metadata:
  name: grafana
spec:
  baseImage: {{ grafana_base_image }}
  config:
    auth:
      disable_login_form: true
      disable_signout_menu: true
    auth.basic:
      # Must be enabled. Operator uses basic auth when connecting to Grafana APIs.
      enabled: true
    auth.proxy:
      auto_sign_up: true
      enabled: true
      header_name: X-Forwarded-User
    auth.anonymous:
      enable: false
    users:
      auto_assign_org_role: Admin
    log:
      level: debug
      mode: console
  deployment:
    env:
      - name: OPENSHIFT_SERVICE_CA
        valueFrom:
          configMapKeyRef:
            key: service-ca.crt
            name: openshift-service-ca.crt
  service:
    type: ClusterIP
  client:
    preferService: true
  serviceAccount:
    skip: false
  dashboardLabelSelector:
  - matchExpressions:
    - key: app
      operator: In
      values:
      - grafana
