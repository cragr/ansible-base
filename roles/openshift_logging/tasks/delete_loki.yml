- import_tasks: get_default_sc.yml

- name: Delete Loki instance
  kubernetes.core.k8s:
    template:
      - logging-loki-s3-secret.yaml
      - logging-loki-lokistack.yaml
    wait: true
    state: absent

- name: Delete Loki operator
  import_role:
    name: openshift_common
    tasks_from: delete_operator.yml
  vars:
    delete_operator_subscription_name: loki-operator
    delete_operator_subscription_namespace: openshift-operators-redhat

- import_role:
    name: openshift_common
    tasks_from: delete_kubernetes_objects.yml
  vars:
    delete_kubernetes_objects:
      - api_version: console.openshift.io/v1alpha1
        kind: ConsolePlugin
        name: logging-view-plugin
