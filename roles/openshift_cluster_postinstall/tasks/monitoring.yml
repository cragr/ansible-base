# See also: https://docs.openshift.com/container-platform/4.9/monitoring/enabling-monitoring-for-user-defined-projects.html

- name: Use persistent storage for monitoring and enable monitoring of user-defined workloads
  kubernetes.core.k8s:
    template: cluster-monitoring-config-cm.yaml

- name: Create convenience routes for accessing Prometheus UI, AlertManager UI, and Thanos Querier UI
  kubernetes.core.k8s:
    template:
      - prometheus-k8s-custom-route.yaml
      - alertmanager-main-custom-route.yaml
      - thanos-querier-custom-route.yaml
      - prometheus-k8s-sa.yaml
      - alertmanager-main-sa.yaml
      - thanos-querier-sa.yaml
