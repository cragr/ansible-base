- name: Delete MetalLB instance
  kubernetes.core.k8s:
    definition: "{{ lookup('template', item) }}"
    state: absent
  loop:
    - instance/metallb-metallb.yaml
    - instance/metallb-pool-ipaddresspool.yaml
    - instance/metallb-pool-l2advertisement.yaml

- name: Delete MetalLB operator
  kubernetes.core.k8s:
    definition: "{{ lookup('template', item) }}"
    state: absent
  loop:
    - operator/metallb-operator-sub.yaml
    - operator/metallb-operator-og.yaml
    - operator/metallb-system-ns.yaml
