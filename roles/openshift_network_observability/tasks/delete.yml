- name: Delete Network Observability instance
  kubernetes.core.k8s:
    template:
      - instance/cluster-flowcollector.yaml
      - instance/loki-netobserv-tenant-clusterrole.yaml
      - instance/loki-netobserv-tenant-clusterrolebinding.yaml
    wait: true
    state: absent

- name: Delete Network Observability operator
  kubernetes.core.k8s:
    template:
      - operator/netobserv-operator-sub.yaml
    wait: true
    state: absent

- import_role:
    name: openshift_loki
    tasks_from: delete.yml
  vars:
    loki_instance_namespace: netobserv
    loki_instance_tenants_mode: openshift-network

- name: Delete Network Observability namespace
  kubernetes.core.k8s:
    template:
      - instance/netobserv-ns.yaml
    wait: true
    state: absent
