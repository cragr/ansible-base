- name: Delete Kafka cluster
  kubernetes.core.k8s:
    definition: "{{ lookup('url', item, split_lines=false) }}"
    namespace: '{{ amq_streams_kafka_cluster_namespace }}'
    state: absent
  loop:
    - '{{ amq_streams_examples }}/kafka/kafka-persistent.yaml'

- name: Delete namespace
  kubernetes.core.k8s:
    definition: "{{ lookup('template', '{{ item }}') }}"
    state: absent
  loop:
    - kafka-cluster-ns.yaml
