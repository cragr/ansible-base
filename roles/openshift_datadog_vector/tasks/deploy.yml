- name: Create namespace {{ datadog_vector_namespace }}
  k8s:
    api_version: v1
    kind: Namespace
    name: '{{ openshift_datadog_vector_namespace }}'

- name: Deploy Datadog Vector
  import_role:
    name: openshift_common
    tasks_from: kustomize.yml
  vars:
    kustomize_name: vector
    kustomize_files:
      - kustomization.yaml
    kustomize_op: apply

- import_role:
    name: openshift_common
    tasks_from: wait_for_deployment.yml
  vars:
    wait_for_deployment_name: '{{ openshift_datadog_vector_deployment_name }}'
    wait_for_deployment_namespace: '{{ openshift_datadog_vector_namespace }}'
