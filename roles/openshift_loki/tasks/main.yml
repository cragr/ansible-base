- name: Create namespace
  kubernetes.core.k8s:
    definition: "{{ lookup('pipe', 'oc kustomize ' + loki_kustomizations.namespace) }}"

- name: Deploy MinIO
  kubernetes.core.k8s:
    definition: "{{ lookup('pipe', 'oc kustomize ' + loki_kustomizations.minio) }}"

- name: Deploy Loki
  kubernetes.core.k8s:
    definition: "{{ lookup('pipe', 'oc kustomize ' + loki_kustomizations.loki) }}"

- name: Deploy Promtail
  kubernetes.core.k8s:
    definition: "{{ lookup('pipe', 'oc kustomize ' + loki_kustomizations.promtail) }}"
