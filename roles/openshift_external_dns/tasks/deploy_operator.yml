- name: Create namespace {{ external_dns_instance_namespace }}
  kubernetes.core.k8s:
    template: external-dns-ns.yaml

- name: Deploy External DNS operator
  kubernetes.core.k8s:
    template:
      - external-dns-operator-ns.yaml
      - external-dns-operator-og.yaml
      - external-dns-operator-sub.yaml

- import_role:
    name: openshift_common
    tasks_from: wait_for_operator.yml
  vars:
    subscription_name: '{{ external_dns_subscription_name }}'
    subscription_namespace: '{{ external_dns_subscription_namespace }}'
