- hosts: esxi
  gather_facts: false
  tasks:
    - import_role:
        name: vmware_lab
        tasks_from: configure_esxi_host.yml

- hosts: esxi1
  gather_facts: false
  tasks:
    - import_role:
        name: vmware_lab
        tasks_from: deploy_vcenter.yml

- hosts: vcenter
  gather_facts: false
  tasks:
    - import_role:
        name: vmware_lab
        tasks_from: configure_vcenter_host.yml

- hosts: localhost
  gather_facts: false
  tasks:
    - import_role:
        name: vmware_lab
        tasks_from: configure_vcenter_cert.yml
      when: vmware_lab_certs.vcenter is defined

- hosts: esxi
  gather_facts: false
  tasks:
    - import_role:
        name: vmware_lab
        tasks_from: create_vcenter_objects.yml
      tags: create_vcenter_objects
